(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4852],{82838:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/lend",function(){return l(30943)}])},30943:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return lend}});var a=l(35944),n=l(67294),r=l(52129),i=l(3718),s=l(93734),o=l(88078),d=l(51233),u=l(82200),c=l(15861),p=l(10534),y=l(13371),b=l(95201),g=l(45080),MyAccount_AccountSupplyDashboard=e=>{let{assets:t,isKYCVerified:l,userTotalCollateralValueCents:n,userTotalSupplyBalanceCents:r}=e,i=(0,y.i)(),s=null==r?void 0:r.toNumber(),h=(0,b.RF)({assets:t}),m=r&&h&&(0,b.D$)({supplyBalanceCents:r,yearlyEarningsCents:h}),k=(0,g.yo)(m),v=(0,g.RV)({value:h,shortenLargeValue:!0,decimals:((null==h?void 0:h.toNumber())||0)>100?0:2}),Z=(0,g.RV)({value:l?n:s,shortenLargeValue:!0,decimals:((null==h?void 0:h.toNumber())||0)>100?1:2}),f=void 0===m,w=(0,a.tZ)(o.Z,{sx:{borderRadius:"4px",width:"3em"}});return(0,a.BX)(d.Z,{direction:{xs:"column",md:"row"},columnGap:0,flexWrap:"wrap",mx:"auto",spacing:3,width:"100%",children:[(0,a.tZ)(u.Z,{sx:{flex:1,background:"#D8E3E4",padding:e=>e.spacing(6,7)},children:(0,a.BX)(c.Z,{variant:"h4",css:i.item,flex:1,children:[(0,a.BX)(c.Z,{component:"span",variant:"body2",css:i.labelListItem,children:["Net APY"," ",(0,a.tZ)(p.u,{title:"This Net APY considers the yearly growth in value of OUSG, projecting its performance from the past 15 days.",children:(0,a.tZ)(p.JO,{name:"info",css:i.infoIcon,size:"1em"})})]}),f?w:k]})}),(0,a.tZ)(u.Z,{sx:{flex:1,background:"#D8E3E4",padding:e=>e.spacing(6,7)},children:(0,a.BX)(c.Z,{variant:"h4",css:i.item,children:[(0,a.tZ)(c.Z,{component:"span",variant:"body2",css:i.labelListItem,children:"Your Lending Value"}),f?w:Z]})}),(0,a.tZ)(u.Z,{sx:{flex:1,background:"#D8E3E4",padding:e=>e.spacing(6,7)},children:(0,a.BX)(c.Z,{variant:"h4",css:i.item,children:[(0,a.tZ)(c.Z,{component:"span",variant:"body2",css:i.labelListItem,children:"Projected Yearly Earnings"}),f?w:v]})})]})},h=l(95599),m=l(11163),k=l(39693),v=l.n(k),Z=l(77343),f=l(68216),w=l(82729),V=l(70917),_=l(2734);function _templateObject(){let e=(0,w._)(["\n      .table__table-cards__card-content {\n        grid-row-gap: ",";\n        grid-template-columns: 1fr 1fr;\n        grid-template-rows: 1fr 1fr;\n      }\n    "]);return _templateObject=function(){return e},e}let useStyles=()=>{let e=(0,_.Z)();return{cardContentGrid:(0,V.iv)(_templateObject(),e.spacing(4))}};var SupplyMarket_SuppliedTable=e=>{let{assets:t,rowOnClick:l,isKYCVerified:r,isLoading:i}=e,{t:o}=(0,Z.$)(),u=useStyles(),y=(0,f.y)(),{address:b}=(0,n.useContext)(s.V),h=(0,m.useRouter)(),k=(0,n.useMemo)(()=>v()([{key:"asset",label:o("markets.columns.asset"),orderable:!1,align:"left"},{key:"apy",label:"Asset APY",orderable:!0,align:"right"},{key:"tvl",label:"Asset TVL",orderable:!0,align:"right"},{key:"liquidity",label:"Asset Liquidity",orderable:!0,align:"right"},{key:"balance",label:o("markets.columns.supplied"),orderable:!0,align:"right"},{key:"buttons"},{key:"blank",label:"",orderable:!1,align:"right"}]),[r]),w=t.filter(e=>"OUSG"!==e.token.symbol).map(e=>v()([{key:"asset",render:()=>(0,a.tZ)(p.SN,{token:e.token}),value:e.token.symbol,align:"left"},{key:"apy",render:()=>{let t=e.supplyApy;return"OUSG"===e.token.symbol?(0,a.tZ)(c.Z,{variant:"body2",children:" N/A"}):(0,a.BX)(c.Z,{variant:"body1",children:[" ",(0,g.yo)(t)]})},value:e.supplyApy.toNumber(),align:"right"},{key:"tvl",render:()=>(0,a.tZ)(p.zW,{topValue:(0,g.RV)({value:100*e.totalSupplyUsd,shortenLargeValue:!0,showDust:!1}),bottomValue:(0,g.xH)({value:e.totalSupplyTokens,token:e.token,minimizeDecimals:!0,shortenLargeValue:!0})}),align:"right",value:e.totalSupplyUsd},{key:"liquidity",render:()=>(0,a.tZ)(c.Z,{variant:"body1",children:(0,g.RV)({value:(e.totalSupplyUsd-e.totalBorrowsUsd)*100,shortenLargeValue:!0})}),value:e.totalSupplyUsd-e.totalBorrowsUsd,align:"right"},{key:"balance",render:()=>(0,a.tZ)(p.zW,{topValue:(0,g.RV)({shortenLargeValue:!0,value:e.supplyBalance.multipliedBy(e.tokenPrice).multipliedBy(100),showDust:!1}),bottomValue:(0,g.xH)({value:e.supplyBalance,token:e.token,shortenLargeValue:!0,minimizeDecimals:!0})}),value:e.supplyBalance.multipliedBy(e.tokenPrice).multipliedBy(100).toNumber(),align:"right"},{key:"buttons",render:()=>(0,a.BX)(d.Z,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.supplyBalance.gt(0)&&(0,a.tZ)(p.zx,{disabled:!b,variant:"tertiary",small:!0,onClick:t=>{t.stopPropagation(),h.push("/lend?lend=".concat(e.token.id,"&tab=1"))},children:"Withdraw"}),(0,a.tZ)(p.zx,{disabled:!b,variant:"primary",small:!0,children:"Lend"})]}),value:0,align:"right",colSpan:2},{key:"blank",value:0}]));return(0,a.tZ)(p.iA,{columns:k,isFetching:i,data:w,initialOrder:{orderBy:"apy",orderDirection:"desc"},rowOnClick:l,rowKeyIndex:0,tableCss:y.table,cardsCss:y.cards,css:[y.marketTable,u.cardContentGrid]})},C=l(70025),A=l(98682),lend=()=>{var e;let{address:t}=(0,n.useContext)(s.V),{data:{assets:l,userTotalBorrowBalanceCents:o,userTotalSupplyBalanceCents:d,userTotalCollateralValueCents:u},isLoading:c}=(0,C.Z)({accountAddress:t}),{kycStatus:p,isLoading:y}=(0,A.Z)({accountAddress:t}),b=p||!1,g=c||y,{suppliedAssets:k,supplyMarketAssets:v,borrowingAssets:Z,borrowMarketAssets:f}=(0,n.useMemo)(()=>{let e=l.reduce((e,t)=>(e.suppliedAssets.push(t),t.token.id!==i.eT.ousg.id&&e.borrowingAssets.push(t),e),{suppliedAssets:[],supplyMarketAssets:[],borrowingAssets:[],borrowMarketAssets:[]});return e},[l,g,o,d]),w=(0,m.useRouter)(),V=null===(e=w.query)||void 0===e?void 0:e.lend,_=(0,n.useMemo)(()=>[...v,...k].find(e=>{var t;return(null===(t=e.token.id)||void 0===t?void 0:t.toLowerCase())===(null==V?void 0:V.toLowerCase())}),[V,v,k]);return(0,a.BX)(a.HY,{children:[t&&b?null:(0,a.tZ)(r.Z,{title:"Connect your wallet to view your portfolio",children:(0,a.tZ)(MyAccount_AccountSupplyDashboard,{assets:l,isKYCVerified:b,userTotalCollateralValueCents:+u.toFixed(),userTotalSupplyBalanceCents:d})}),(0,a.tZ)(SupplyMarket_SuppliedTable,{isKYCVerified:b,assets:k,rowOnClick:(e,t)=>{let l=t[0].value;w.push({query:{...w.query,lend:l}})},isLoading:g}),_&&(0,a.tZ)(h.s,{isKYCVerified:b,asset:_,assets:[...k,...v],onClose:()=>{let e={...w.query};delete e.borrow,delete e.lend,delete e.tag,delete e.toggle,delete e.tab,w.push({query:e})}})]})}}},function(e){e.O(0,[56,5072,9090,9774,2888,179],function(){return e(e.s=82838)}),_N_E=e.O()}]);
//# sourceMappingURL=lend-9a7c19fca98943af.js.map